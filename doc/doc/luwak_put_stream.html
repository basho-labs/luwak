<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Module luwak_put_stream</title>
<link rel="stylesheet" type="text/css" href="stylesheet.css" title="EDoc">
</head>
<body bgcolor="white">
<div class="navbar"><a name="#navbar_top"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<hr>

<h1>Module luwak_put_stream</h1>
<ul class="index"><li><a href="#index">Function Index</a></li><li><a href="#functions">Function Details</a></li></ul>


<h2><a name="index">Function Index</a></h2>
<table width="100%" border="1" cellspacing="0" cellpadding="2" summary="function index"><tr><td valign="top"><a href="#close-1">close/1</a></td><td>Signals the stream to close.</td></tr>
<tr><td valign="top"><a href="#flush-1">flush/1</a></td><td>Causes the stream to immediately flush its buffers and commit any pending writes
       to the file.</td></tr>
<tr><td valign="top"><a href="#ping-1">ping/1</a></td><td>Pings the stream, resetting the TTL timer.</td></tr>
<tr><td valign="top"><a href="#send-2">send/2</a></td><td>Sends the given binary to the stream for writing.</td></tr>
<tr><td valign="top"><a href="#start-4">start/4</a></td><td></td></tr>
<tr><td valign="top"><a href="#start_link-4">start_link/4</a></td><td>Starts a stream for writing at the specified offset.</td></tr>
<tr><td valign="top"><a href="#status-2">status/2</a></td><td>Gets the current filehandle on which the stream is operating.</td></tr>
</table>

<h2><a name="functions">Function Details</a></h2>

<h3 class="function"><a name="close-1">close/1</a></h3>
<div class="spec">
<p><tt>close(X1) -&gt; any()</tt></p>
</div><p>Signals the stream to close.  The stream will immediately flush its buffers to
       the file and will stay open for TTL milliseconds waiting for one last status/2 call.</p>

<h3 class="function"><a name="flush-1">flush/1</a></h3>
<div class="spec">
<p><tt>flush(X1) -&gt; any()</tt></p>
</div><p>Causes the stream to immediately flush its buffers and commit any pending writes
       to the file.  Equivalent to an fsync call in most other filesystem API's.</p>

<h3 class="function"><a name="ping-1">ping/1</a></h3>
<div class="spec">
<p><tt>ping(X1) -&gt; any()</tt></p>
</div><p>Pings the stream, resetting the TTL timer.  Use this if you have a slow writer
       but don't necessarily want to extend the TTL time.</p>

<h3 class="function"><a name="send-2">send/2</a></h3>
<div class="spec">
<p><tt>send(X1, Data) -&gt; any()</tt></p>
</div><p>Sends the given binary to the stream for writing.  The put stream does its
       own internal buffering for performance reasons, so this is equivalent to
       writing to a regular file on a local filesystem.  If you want guarantees that
       your write is actually written then you need to call flush/1 on the put stream.</p>

<h3 class="function"><a name="start-4">start/4</a></h3>
<div class="spec">
<p><tt>start(Riak, File, Offset, TTL) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="start_link-4">start_link/4</a></h3>
<div class="spec">
<p><tt>start_link(Riak::<a href="#type-riak">riak()</a>, File::<a href="#type-luwak_file">luwak_file()</a>, Offset::<a href="#type-int">int()</a>, TTL::<a href="#type-int">int()</a>) -&gt; <a href="#type-put_stream">put_stream()</a></tt></p>
</div><p>Equivalent to <a href="#start-4"><tt>start(Riak, File, Offset, TTL)</tt></a>.</p>
<p>Starts a stream for writing at the specified offset.  The stream will remain
       open for TTL milliseconds.  Every time the stream is written to or pinged
       it will reset the TTL counter.  Therefore slow writers should set an appropriate
       TTL or use ping/1 to keep a stream open.  This function links the stream process
       to the calling process.</p>

<h3 class="function"><a name="status-2">status/2</a></h3>
<div class="spec">
<p><tt>status(Stream::<a href="#type-put_stream">put_stream()</a>, Timeout) -&gt; {ok, File} | {error, Reason}</tt></p>
</div><p>Gets the current filehandle on which the stream is operating.  Can be called at
       any time during the life of a stream, including after a call to close/1.  The
       returned file is not guaranteed to reflect the latest calls to send/2, since
       status/2 does not cause a flush to occur.</p>
<hr>

<div class="navbar"><a name="#navbar_bottom"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<p><i>Generated by EDoc, May 31 2010, 11:13:39.</i></p>
</body>
</html>
